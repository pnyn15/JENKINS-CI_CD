stage('Install ArgoCD CLI') {
            steps {
                script {
                    // Install ArgoCD CLI (if not already available in the Docker container)
                    sh '''
                        curl -sSL -o /usr/local/bin/argocd https://github.com/argoproj/argo-cd/releases/download/v2.5.4/argocd-linux-amd64
                        chmod +x /usr/local/bin/argocd
                    '''
                    
                    // Verify if argocd CLI is correctly installed
                    sh 'argocd version'
                }
            }
        }
        stage('Sync with ArgoCD') {
            environment {
                ARGOCD_SERVER = '18.119.253.206:31926'  // ArgoCD server IP and port
                ARGOCD_AUTH_TOKEN = credentials('argocd-token')  // ArgoCD authentication token
            }
            steps {
                script {
                    // Login to ArgoCD using the auth token
                    sh '''
                        argocd login ${ARGOCD_SERVER} --auth-token ${ARGOCD_AUTH_TOKEN} --insecure
                    '''
                    
                    // Sync the ArgoCD application (replace 'test' with your application name)
                    sh '''
                        argocd app sync test --wait
                    '''
                }
            }
        }
    }
}
